<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow
                      http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

  <secured attributes="ROLE_orga, ROLE_studentin" match="any" />

  <view-state id="mobilePollNameSettings" view="/flows/definitions/poll/poll/mobilePollNameSettings">
    <transition on="home" to="home"/>
    <transition on="access" to="mobilePollAccessSettings"/>
  </view-state>

  <view-state id="mobilePollAccessSettings" view="/flows/definitions/poll/poll/mobilePollAccessSettings">
    <transition on="name" to="mobilePollNameSettings"/>
    <transition on="choicesettings" to="mobilePollChoiceSettings"/>
  </view-state>

  <view-state id="mobilePollChoiceSettings" view="flows/poll/mobilePollChoiceSettings">
    <transition on="access" to="mobilePollAccessSettings"/>
    <transition on="choiceoptions" to="mobilePollChoiceOptions"/>
  </view-state>

  <view-state id="mobilePollChoiceOptions" view="flows/poll/mobilePollChoiceOptions">
    <transition on="choicesettings" to="mobilePollChoiceSettings"/>
    <transition on="publication" to="mobilePollPublicationSettings"/>
  </view-state>

  <view-state id="mobilePollPublicationSettings" view="flows/poll/mobilePollPublicationSettings">
    <transition on="choiceoptions" to="mobilePollChoiceOptions"/>
    <transition on="confirmation" to="mobilePollConfirmation"/>
  </view-state>

  <view-state id="mobilePollConfirmation" view="flows/poll/mobilePollConfirmation">
    <transition on="publication" to="mobilePollPublicationSettings"/>
    <transition on="submit" to="home"/>
  </view-state>

  <end-state id="home" view="externalRedirect:contextRelative:/"/>
</flow>